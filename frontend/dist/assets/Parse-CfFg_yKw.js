import{p as T}from"./api-B5B5DeYR.js";import{_ as C,c as u,a as t,w as o,b as s,e as v,f as m,t as h,d,r as l,o as p}from"./index-ahAVBiDV.js";const V={name:"Parse",data(){return{docId:"",loading:!1,parseError:"",requirementTree:null,treeProps:{children:"children",label:"name"}}},mounted(){this.docId=this.$route.params.docId,this.handleParse()},methods:{async handleParse(){if(!this.docId){this.$message.error("文档ID不能为空");return}this.loading=!0,this.parseError="",this.requirementTree=null;try{const n=await T(this.docId);this.requirementTree=n.data.requirement_tree,this.$message.success("解析成功")}catch(n){this.parseError=n.message||"解析失败，请重试",this.$message.error("解析失败")}finally{this.loading=!1}},goToValidate(){this.$router.push(`/validate/${this.docId}`)},goToExport(){this.$router.push(`/export/${this.docId}`)},goToHistory(){this.$router.push("/history")}}},b={class:"parse"},E={class:"card-header"},w={class:"card-body"},P={key:1,style:{"margin-top":"20px"}},q={class:"custom-tree-node"},B={key:0,class:"original-text"},D={style:{"margin-top":"20px"}};function N(n,e,H,S,r,a){const i=l("el-button"),f=l("el-input"),g=l("el-form-item"),y=l("el-form"),x=l("el-alert"),k=l("el-tree"),I=l("el-card");return p(),u("div",b,[t(I,{shadow:"hover",style:{"max-width":"800px",margin:"0 auto"}},{header:o(()=>[s("div",E,[e[2]||(e[2]=s("span",null,"文档解析",-1)),t(i,{type:"primary",onClick:a.handleParse,loading:r.loading},{default:o(()=>[...e[1]||(e[1]=[d("解析文档",-1)])]),_:1},8,["onClick","loading"])])]),default:o(()=>[s("div",w,[t(y,{"label-width":"120px"},{default:o(()=>[t(g,{label:"文档ID"},{default:o(()=>[t(f,{modelValue:r.docId,"onUpdate:modelValue":e[0]||(e[0]=_=>r.docId=_),readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),r.parseError?(p(),v(x,{key:0,title:"解析失败: "+r.parseError,type:"error","show-icon":"",closable:!1,style:{"margin-top":"20px"}},null,8,["title"])):m("",!0),r.requirementTree?(p(),u("div",P,[e[6]||(e[6]=s("h3",null,"需求树结构",-1)),t(k,{data:r.requirementTree.children,props:r.treeProps,"node-key":"id","default-expand-all":"",style:{"margin-top":"10px"}},{default:o(({node:_,data:c})=>[s("span",q,[s("span",null,h(c.name),1),c.original_text?(p(),u("span",B,h(c.original_text),1)):m("",!0)])]),_:1},8,["data","props"]),s("div",D,[t(i,{type:"primary",onClick:a.goToValidate},{default:o(()=>[...e[3]||(e[3]=[d("验证需求",-1)])]),_:1},8,["onClick"]),t(i,{type:"success",onClick:a.goToExport},{default:o(()=>[...e[4]||(e[4]=[d("导出需求",-1)])]),_:1},8,["onClick"]),t(i,{onClick:a.goToHistory},{default:o(()=>[...e[5]||(e[5]=[d("查看历史",-1)])]),_:1},8,["onClick"])])])):m("",!0)])]),_:1})])}const j=C(V,[["render",N],["__scopeId","data-v-fc1d42e7"]]);export{j as default};
