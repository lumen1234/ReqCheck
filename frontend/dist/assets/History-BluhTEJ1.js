import{g as v}from"./api-B5B5DeYR.js";import{_ as x,c as T,a as o,w as a,b as m,d as s,t as c,e as f,f as _,r as i,o as g}from"./index-ahAVBiDV.js";const w={name:"History",data(){return{documents:[],loading:!1,total:0,currentPage:1,pageSize:10}},mounted(){this.getDocumentList()},methods:{async getDocumentList(){this.loading=!0;try{const e=await v();this.documents=e.data.documents,this.total=this.documents.length}catch{this.$message.error("获取文档列表失败")}finally{this.loading=!1}},formatDate(e){return e?new Date(e).toLocaleString():""},getStatusType(e){switch(e){case"已上传":return"info";case"已解析":return"success";default:return"default"}},handleCurrentChange(e){this.currentPage=e},goToParse(e){this.$router.push(`/parse/${e}`)},goToValidate(e){this.$router.push(`/validate/${e}`)},goToExport(e){this.$router.push(`/export/${e}`)},goToDetail(e){this.$router.push(`/document/${e}`)}}},D={class:"history"},z={class:"card-header"},V={class:"card-body"};function $(e,t,P,S,l,r){const u=i("el-button"),d=i("el-table-column"),y=i("el-tag"),h=i("el-table"),C=i("el-pagination"),k=i("el-empty"),b=i("el-card");return g(),T("div",D,[o(b,{shadow:"hover",style:{"max-width":"1000px",margin:"0 auto"}},{header:a(()=>[m("div",z,[t[3]||(t[3]=m("span",null,"历史记录",-1)),o(u,{type:"primary",onClick:t[0]||(t[0]=n=>e.$router.push("/upload"))},{default:a(()=>[...t[2]||(t[2]=[s("上传新文档",-1)])]),_:1})])]),default:a(()=>[m("div",V,[o(h,{data:l.documents,style:{width:"100%"},loading:l.loading},{default:a(()=>[o(d,{prop:"id",label:"文档ID",width:"300"}),o(d,{prop:"filename",label:"文件名"}),o(d,{prop:"file_type",label:"文档类型",width:"150"}),o(d,{prop:"upload_time",label:"上传时间",width:"200"},{default:a(({row:n})=>[s(c(r.formatDate(n.upload_time)),1)]),_:1}),o(d,{prop:"status",label:"状态",width:"120"},{default:a(({row:n})=>[o(y,{type:r.getStatusType(n.status)},{default:a(()=>[s(c(n.status),1)]),_:2},1032,["type"])]),_:1}),o(d,{label:"操作",width:"300"},{default:a(({row:n})=>[o(u,{type:"primary",size:"small",onClick:p=>r.goToParse(n.id)},{default:a(()=>[...t[4]||(t[4]=[s("解析",-1)])]),_:1},8,["onClick"]),o(u,{type:"success",size:"small",onClick:p=>r.goToValidate(n.id)},{default:a(()=>[...t[5]||(t[5]=[s("验证",-1)])]),_:1},8,["onClick"]),o(u,{type:"info",size:"small",onClick:p=>r.goToExport(n.id)},{default:a(()=>[...t[6]||(t[6]=[s("导出",-1)])]),_:1},8,["onClick"]),o(u,{type:"warning",size:"small",onClick:p=>r.goToDetail(n.id)},{default:a(()=>[...t[7]||(t[7]=[s("详情",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data","loading"]),l.documents.length>0?(g(),f(C,{key:0,layout:"prev, pager, next",total:l.total,"page-size":l.pageSize,"current-page":l.currentPage,onCurrentChange:r.handleCurrentChange,style:{"margin-top":"20px","text-align":"right"}},null,8,["total","page-size","current-page","onCurrentChange"])):_("",!0),!l.loading&&l.documents.length===0?(g(),f(k,{key:1,description:"暂无文档记录",style:{margin:"40px 0"}},{default:a(()=>[o(u,{type:"primary",onClick:t[1]||(t[1]=n=>e.$router.push("/upload"))},{default:a(()=>[...t[8]||(t[8]=[s("上传文档",-1)])]),_:1})]),_:1})):_("",!0)])]),_:1})])}const E=x(w,[["render",$],["__scopeId","data-v-af723f71"]]);export{E as default};
