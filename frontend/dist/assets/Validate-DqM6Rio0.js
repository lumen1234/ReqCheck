import{v as k}from"./api-B5B5DeYR.js";import{_ as I,c as _,a as t,w as o,b as a,e as V,f as m,d as r,t as C,r as l,o as p}from"./index-ahAVBiDV.js";const w={name:"Validate",data(){return{docId:"",loading:!1,validateError:"",validationResults:[]}},mounted(){this.docId=this.$route.params.docId,this.handleValidate()},methods:{async handleValidate(){if(!this.docId){this.$message.error("文档ID不能为空");return}this.loading=!0,this.validateError="",this.validationResults=[];try{const n=await k(this.docId);this.validationResults=n.data.validation_results,this.$message.success("验证成功")}catch(n){this.validateError=n.message||"验证失败，请重试",this.$message.error("验证失败")}finally{this.loading=!1}},goToExport(){this.$router.push(`/export/${this.docId}`)},goToHistory(){this.$router.push("/history")},goToParse(){this.$router.push(`/parse/${this.docId}`)}}},E={class:"validate"},T={class:"card-header"},R={class:"card-body"},B={key:1,style:{"margin-top":"20px"}},N={style:{"margin-top":"20px"}};function D(n,e,H,P,s,i){const d=l("el-button"),h=l("el-input"),f=l("el-form-item"),g=l("el-form"),v=l("el-alert"),c=l("el-table-column"),y=l("el-tag"),b=l("el-table"),x=l("el-card");return p(),_("div",E,[t(x,{shadow:"hover",style:{"max-width":"800px",margin:"0 auto"}},{header:o(()=>[a("div",T,[e[2]||(e[2]=a("span",null,"需求验证",-1)),t(d,{type:"primary",onClick:i.handleValidate,loading:s.loading},{default:o(()=>[...e[1]||(e[1]=[r("验证需求",-1)])]),_:1},8,["onClick","loading"])])]),default:o(()=>[a("div",R,[t(g,{"label-width":"120px"},{default:o(()=>[t(f,{label:"文档ID"},{default:o(()=>[t(h,{modelValue:s.docId,"onUpdate:modelValue":e[0]||(e[0]=u=>s.docId=u),readonly:""},null,8,["modelValue"])]),_:1})]),_:1}),s.validateError?(p(),V(v,{key:0,title:"验证失败: "+s.validateError,type:"error","show-icon":"",closable:!1,style:{"margin-top":"20px"}},null,8,["title"])):m("",!0),s.validationResults.length>0?(p(),_("div",B,[e[6]||(e[6]=a("h3",null,"验证结果",-1)),t(b,{data:s.validationResults,style:{width:"100%","margin-top":"10px"}},{default:o(()=>[t(c,{prop:"name",label:"需求名称",width:"200"}),t(c,{prop:"result",label:"验证结果",width:"100"},{default:o(({row:u})=>[t(y,{type:u.result?"success":"danger"},{default:o(()=>[r(C(u.result?"合规":"不合规"),1)]),_:2},1032,["type"])]),_:1}),t(c,{prop:"reason",label:"验证依据"})]),_:1},8,["data"]),a("div",N,[t(d,{type:"success",onClick:i.goToExport},{default:o(()=>[...e[3]||(e[3]=[r("导出需求",-1)])]),_:1},8,["onClick"]),t(d,{onClick:i.goToHistory},{default:o(()=>[...e[4]||(e[4]=[r("查看历史",-1)])]),_:1},8,["onClick"]),t(d,{onClick:i.goToParse},{default:o(()=>[...e[5]||(e[5]=[r("查看需求树",-1)])]),_:1},8,["onClick"])])])):m("",!0)])]),_:1})])}const S=I(w,[["render",D],["__scopeId","data-v-7bf23717"]]);export{S as default};
