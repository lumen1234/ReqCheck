



MEMS陀螺
软件需求规格说明


拟制：

审核：

会签：

批准：





目  录
1.	范围	1
1.1.	标识	1
1.2.	系统概述	1
1.3.	文档概述	1
2.	引用文档	2
3.	需求	2
3.1.	要求的状态和方式	2
3.2.	能力需求	2
3.3.	外部接口需求	10
3.4.	内部接口需求	11
3.5.	系统的内部数据需求	12
3.6.	适应性需求	12
3.7.	保密性需求	13
3.8.	安全性需求	13
3.9.	环境适应性需求	13
3.10.	其他质量特性	14
3.11.	TDG06E_CSCI计算机资源需求	15
3.12.	设计和实现约束	16
3.13.	人员相关需求	16
3.14.	训练相关需求	16
3.15.	软件保障需求	16
3.16.	包装需求	16
3.17.	需求的优先顺序和关键程度	16
3.18.	其他需求	16
4.	合格性规定	16
4.1.	合格性方法	16
4.2.	合格性级别	17
5.	需求可追踪性	17
6.	注释	17




软件需求规格说明
1. 范围
1.1. 标识
本文档适用于“MEMS陀螺”业务软件系统核心功能开发项目。系统及开发项目的中文名称：“MEMS陀螺”，简称“TDG06E”。
文件标识号：TDG06E-SRS-V1.01.048；
名称：MEMS陀螺软件需求规格说明；
软件版本号：TDG06E_Z_V1.01.048
文件版本号：V1.01.048。
1.2. 系统概述
MEMS陀螺是是一款小型三轴陀螺。其可靠、性价比高，适用于惯性导航研究生产、移动测绘平台姿态测量、无人操控设备控制、宇航设备姿态测量控制等领域。
MEMS陀螺软件是MEMS陀螺的组成之一，MEMS陀螺软件的功能有：
初始化配置；
自检功能；
内部接口通信；
采集单轴陀螺的角速度、温度信息；
补偿算法；
零偏自校准；
数据打包和发送；
外部接口通信。
需求方：；
开发方和保障机构：。
1.3. 文档概述
本文档规定了MEMS陀螺软件的需求规格说明。采用结构化分析的方法对MEMS陀螺软件的功能、性能、组成、接口、数据流、安全要求等方面进行了详细描述。
本文档符合GJB438C-2021军用软件开发文档的有关需求，是软件开发与用户/系统进行需求沟通的基础，是MEMS陀螺软件项目开发的依据。
2. 引用文档
本文档引用文件参考表 1：
1	引用文档一览表
3. 需求
3.1. 要求的状态和方式
MEMS陀螺作为角速度传感器，需实现载体角速度测量功能。
TDG06E每次与上级系统通讯均需握手，陀螺接收到驱动端发送的请求帧后即通过422串口发送陀螺的采样信息。
要求TDG06E发送给驱动端的数据，其采样时刻与驱动端接收到该帧数据之间的总时延小于1.5ms，且数据传输4小时传输无错误。
TDG06E选定波特率为2M位/秒。数据格式包含11位：一位起始位(0)，八位数据位(先低位后高位)，一位奇校验位、一位结束位(1)。
3.2. 能力需求
工作流程
软件的工作主流程如图 1所示。系统上电后，首先进行时钟配置、USART、SPI、DMA等外设的初始化，开启各个中断，从FLASH载入补偿、标定参数、零位自校准参数，以备系统调用，进行陀螺各项配置及参数的自检，确定配置及参数是否正常；然后开始以2KHz采样率对陀螺的原始数据及其温度进行采样；再调用补偿、标定参数、零位自校准参数，对陀螺的零位、标度因数、交叉耦合进行标定等，计算出陀螺的角速度，对陀螺输出数据状态进行自检；再根据系统工作状态，将要向外传输的数据进行编码、打包；最后调用接口通信软件，驱动USART，将数据向外传输。

图 1 软件工作主流程图
MEMS陀螺软件主要通过读取三个方位上的角速度，对三轴角速度进行补偿，并打包补偿后的角速度，当接收到上级零位扣除指令后，完成陀螺零位自校准，当接收到上级周期触发指令后，实现数据的对外发送。
配置项初始化功能需求
配置项初始化功能需求见表2。
表 2 配置项初始化功能需求
陀螺数据接收功能需求
陀螺数据接收功能需求见表3。
表 3 陀螺数据接收功能需求

表 4  X、Y轴陀螺数据帧

表 5  Z轴陀螺数据帧

数据处理功能需求
数据处理功能包括数据补偿算法功能与零位自校准功能。
补偿算法功能需求如表6所示。
表 6 数据补偿功能需求

零位自校准功能需求如表7所示。
表 7 零偏自校准功能需求

外部触发需求
外部触发功能需求如表8所示。
表 8 外部触发功能需求
表 9  陀螺单元数据输出格式

自检需求
数据打包功能需求如表10所示。
表10 自检功能需求

数据打包功能需求
数据打包功能需求如表11所示。
表 11数据打包功能需求

数据发送功能需求
数据发送功能需求如表12所示。
表 12数据发送功能需求

性能需求
软件启动时间≤1s，采样时刻与驱动端接收到该帧数据之间的总时延≤1.5ms。
3.3. 外部接口需求
TDG06E外部接口如图 2所示，通过RS422接口将数据发送给上级系统。

图 2  TDG06E的外部接口标识和接口图
软件外部接口描述如表13所示。
表 13 外部接口描述

软件外部接口需求如表14所示。
表 14 外部接口需求

3.4. 内部接口需求
MEMS陀螺通过SPI1、SPI3实现与内部单轴陀螺之间信息传递，信息通信连接图如图 3：

图 3  TDG06E的内部接口图
MEMS陀螺对内总共有3路接口，与内部单轴陀螺进行通讯，具体需求如下。
表 15 MEMS陀螺内部信息

内部接口需求表
三轴陀螺的内部接口需求见表 16。
表 16 内部接口需求
系统内部的定时中断的说明
系统有0.5ms定时中断，用于所有数据的实时计算和处理。包括原始数据采集、数据补偿、数据打包，数据输出等等。

图 4 系统的中断处理流程
3.5. 系统的内部数据需求
内部数据需求
系统内部的数据需求如表4、表5所示。
系统的数据流图
系统的数据流图如图 5所示。

图 5  系统的数据流图
3.6. 适应性需求
软件具备灵活的配置选项，允许用户根据实际需求调整参数设置，如可根据上级系统触发指令周期调整数据更新频率，最大支持2KHz数据输出频率。
3.7. 保密性需求
在软件开发过程中，对内严格执行软件开发保密规定，做到分级负责，责任到人；对外严格执行文件输入输出审批制度和复核制度，做到文物一致。
3.8. 安全性需求
本项目软件要求严格执行GJB/Z 102A-2012、软件安全性设计准则、设计软件接口时要求：
a) 模块的参数个数与模块接受的输入变元个数一致；
b) 模块的参数属性与模块接受的输入变元属性一致；
c) 模块的参数单位与模块接受的输入变元单位一致；
d) 模块的参数次序与模块接受的输入变元次序一致；
e) 传送给被调用模块的变元个数与该模块的参数个数相同；
f) 传送给被调用模块的变元属性与该模块参数的属性匹配；
g) 传送给被调用模块的变元单位与该模块参数的单位一致；
h) 传送给被调用模块的变元次序与该模块参数的次序一致；
i) 调用内部函数时，变元的个数、属性、单位和次序正确；
j) 调用内部函数时，不会修改只是作为输入值的変元；
k) 全程变量在所有引用它们的模块中都有相同的定义；
l) 不存在把常数当作变量来传送的情况。
软件安全性系数高，就需要开发高可靠性软件。首先必须采用软件工程化方法，搞好软件开发工程化。要求软件开发规范化，尽可能采用先进、适用的软件开发工具；加强软件检查和测试，尽早开展软件检查和测试，采取措施诸如自检、互检、专检相结合的“三检制”，制定设计检查等使得检查工作切实有效。
在工作过程中，错误的（状态转换）命令将不予响应。
3.9. 环境适应性需求
环境需求如表17所示。
表17  环境要求
3.10. 其他质量特性
软件开发过程中应严格履行软件产品研制程序，加强软件文档管理、评审管理、配置管理，强化软件测试。
软件注释要求注释内容与被注释对象具有一致性；对变量对应的特殊值含义进行注释。
可靠性
软件可靠性目标：数据传输4小时无错误。
软件可靠性设计方法主要采取三种方法：避错、查错和容错设计。在设计过程中应按照以下设计准则：
软件应采取模块化的设计思路，将浮渣的问题分解为若干易于处理的子问题；
采取模块独立的方式，要求每一个模块完成一个相对独立的特定子功能,力求实现高内聚低耦合；
信息隐蔽，指一个模块内包含的信息（过程和数据）对于不需要这些信息的模块来说，是不能访问的；
控制模块代码的行数，单一模块最好不超过200行；
降低模块接口的复杂度；
软件设计过程中采取容错设计，在一定程度上应对自身故障具体屏蔽能力以及能从错误状态自动恢复到正常状态。
维修性
产品软件通过FLASHBURN软件更新陀螺的程序和补偿参数。
测试性
软件通讯协议预留产品故障码、校验和、帧头、帧尾，可以通过产品上位机或串口助手查看，根据产品输出状态确定产品软件的运行状态。
计算机资源需求
计算机硬件需求
本系统为嵌入式系统，系统软件运行于陀螺系统内部计算机板上的N32G4FRHEQ7处理器中，软件开发环境是KEIL uVision5.0，开发语言为C语言，仿真器为JLINK。
计算机板包含核心器件，并包含了RAM存储器、FLASH 等资源。
计算机硬件资源使用需求
处理机能力需求
a) 主频：80MHz；
b) 处理机能力: 软件程序要适用于处理机能力180DMIPS的要求,并留有适当的的余量（20%）。
容量需求
a) RAM  144K字节；
c) FLASH  256/512K字节。
软件程序要适用于上述硬件环境的要求，并留有适当的余量（20%）。
计算机软件需求
a)  操作系统：win7系统及以上；
b)  数据库管理系统：无；
c)  开发环境：KEIL uVision5.0；
d)  开发语言：C语言。
计算机硬件通信需求
四路串口的数据传输速率：
数字单轴陀螺到CPU主控电路板：SPI1、SPI3  4.5Mbps
CPU主控电路板到上级系统：USART1转RS422  2Mbps
3.12. 设计和实现约束
软件开发统一使用C语言（满足GJB8114-2013的有关规定）。
要严格执行《计算机软件命名规则》、《计算机软件设计规范》。软件必须在源代码中标识出版本号。软件文档中的相关术语应保持统一，符合国军标和项目标准化的要求。
软件应具备一定的重用性和可移植性。
3.13. 人员相关需求
无。
3.14. 训练相关需求
无。
3.15. 软件保障需求
无。
3.16. 包装需求
系统嵌入式软件伴随陀螺系统计算机一同交付使用。
3.17. 需求的优先顺序和关键程度
全部需求同等重要。
3.18. 其他需求
无。
4. 合格性规定
4.1. 合格性方法
演示：对CSCI（或部分CSCI）的进行直接可观察的功能操作，不需要使用复杂或专用的测试设备。
分析：处理从其它合格性方法获得的累计数据，例如对测试数据的整理分析和归纳。
检查：对CSCI的编码、文档等的直观检查等。
测试：采用专用工具软件或测试设备对CSCI功能、性能进行考察验证。
4.2. 合格性级别
配置项：在CSCI中发现的质量问题。
系统集成：在系统集成时发现的问题。
系统：在系统中发现的质量问题。
系统安装：在系统安装时发现的质量问题。
5. 需求可追踪性
表18  需求追踪表

6. 注释
无。
